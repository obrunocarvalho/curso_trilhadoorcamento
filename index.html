<!doctype html>
<html lang="pt-BR">
 <head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Área do Curso - Orçamento Público</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="/_sdk/data_sdk.js"></script>
  <script src="/_sdk/element_sdk.js"></script>
  <style>
        body {
            box-sizing: border-box;
        }
        
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap');
        
        * {
            font-family: 'Inter', sans-serif;
        }
        
        .video-container {
            position: relative;
            padding-bottom: 56.25%;
            height: 0;
            overflow: hidden;
        }
        
        .video-container iframe {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
        }
        
        .star-rating {
            display: inline-flex;
            gap: 4px;
        }
        
        .star {
            cursor: pointer;
            font-size: 24px;
            color: #d1d5db;
            transition: all 0.2s;
        }
        
        .star:hover,
        .star.active {
            color: #fbbf24;
        }
        
        .module-nav {
            scroll-behavior: smooth;
        }
        
        .lesson-card {
            transition: all 0.3s ease;
        }
        
        .lesson-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 12px 24px rgba(0, 0, 0, 0.1);
        }
        
        .completed-badge {
            background: linear-gradient(135deg, #10b981, #059669);
        }
        
        .progress-ring {
            transition: stroke-dashoffset 0.5s ease;
        }
        
        .sidebar-fixed {
            position: sticky;
            top: 100px;
            max-height: calc(100vh - 120px);
            overflow-y: auto;
        }
        
        @media (max-width: 1024px) {
            .sidebar-fixed {
                position: static;
                max-height: none;
            }
        }
        
        .toast {
            position: fixed;
            bottom: 24px;
            right: 24px;
            background: #1f2937;
            color: white;
            padding: 16px 24px;
            border-radius: 12px;
            box-shadow: 0 8px 24px rgba(0, 0, 0, 0.2);
            z-index: 1000;
            animation: slideIn 0.3s ease;
        }
        
        @keyframes slideIn {
            from {
                transform: translateX(400px);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }
        
        .loading-spinner {
            border: 3px solid #f3f4f6;
            border-top: 3px solid #3b82f6;
            border-radius: 50%;
            width: 24px;
            height: 24px;
            animation: spin 0.8s linear infinite;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
  <style>@view-transition { navigation: auto; }</style>
 </head>
 <body class="bg-gray-50"><!-- Header -->
  <header class="bg-white border-b border-gray-200 fixed top-0 left-0 right-0 z-50">
   <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
    <div class="flex items-center justify-between h-16">
     <div class="flex items-center space-x-3">
      <div class="w-10 h-10 bg-gradient-to-br from-blue-600 to-purple-600 rounded-xl flex items-center justify-center">
       <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.746 0 3.332.477 4.5 1.253v13C19.832 18.477 18.246 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"></path>
       </svg>
      </div><span id="course-title" class="text-lg font-semibold text-gray-900">Curso de Orçamento Público</span>
     </div><button onclick="handleExit()" class="flex items-center space-x-2 px-4 py-2 text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-lg transition-colors">
      <svg class="w-5 h-5" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18"></path>
      </svg><span class="font-medium">Voltar</span> </button>
    </div>
   </div>
  </header><!-- Main Content -->
  <main class="pt-16">
   <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
    <div class="grid lg:grid-cols-4 gap-8"><!-- Main Content Area -->
     <div class="lg:col-span-3"><!-- Welcome Section -->
      <section class="bg-white rounded-2xl p-8 mb-8 shadow-sm border border-gray-100">
       <h1 id="welcome-title" class="text-3xl font-bold text-gray-900 mb-4">Bem-vindo à Área do Curso</h1>
       <p id="welcome-text" class="text-gray-600 leading-relaxed mb-6">Aqui você encontra todas as aulas do curso organizadas por módulos. Assista aos vídeos, avalie o conteúdo e baixe os materiais complementares. Marque as aulas como concluídas para acompanhar seu progresso!</p>
       <div class="bg-gradient-to-r from-blue-50 to-purple-50 rounded-xl p-6 border border-blue-100">
        <div class="flex items-start space-x-4">
         <div class="w-12 h-12 bg-blue-600 rounded-xl flex items-center justify-center flex-shrink-0">
          <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"></path>
          </svg>
         </div>
         <div class="flex-1">
          <h3 class="font-semibold text-gray-900 mb-2">Seu Progresso</h3>
          <div class="flex items-center justify-between mb-2"><span id="progress-text" class="text-sm text-gray-600">0 de 6 aulas concluídas</span> <span id="progress-percentage" class="text-sm font-semibold text-blue-600">0%</span>
          </div>
          <div class="w-full bg-gray-200 rounded-full h-2">
           <div id="progress-bar" class="bg-gradient-to-r from-blue-600 to-purple-600 h-2 rounded-full transition-all duration-500" style="width: 0%"></div>
          </div>
         </div>
        </div>
       </div>
      </section><!-- Module Navigation -->
      <nav class="bg-white rounded-2xl p-4 mb-8 shadow-sm border border-gray-100">
       <div class="flex justify-center"><button onclick="scrollToModule('module1')" class="px-6 py-3 bg-blue-600 text-white rounded-xl font-medium hover:bg-blue-700 transition-colors"> Todas as Aulas </button>
       </div>
      </nav><!-- Module 1 -->
      <section id="module1" class="mb-12">
       <div class="bg-gradient-to-r from-blue-600 to-purple-600 rounded-2xl p-8 mb-6 text-white">
        <h2 class="text-3xl font-bold mb-3">Aulas do Curso</h2>
        <p class="text-blue-100 mb-4">Aprenda tudo sobre orçamento público brasileiro através de 6 aulas completas com materiais complementares.</p>
        <div class="flex items-center space-x-2 text-sm">
         <svg class="w-5 h-5" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path>
         </svg><span>6 aulas completas</span>
        </div>
       </div><!-- Lesson 1 -->
       <article class="lesson-card bg-white rounded-2xl p-8 mb-6 shadow-sm border border-gray-100">
        <div class="flex items-start justify-between mb-6">
         <div>
          <h3 class="text-2xl font-bold text-gray-900 mb-2">Aula 1 – Introdução</h3>
          <p class="text-gray-600 mb-3">Entenda os conceitos básicos e a estrutura do orçamento público brasileiro.</p>
          <div class="flex items-center space-x-4 text-sm text-gray-500">
           <div class="flex items-center space-x-1">
            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path>
            </svg><span>3 min</span>
           </div>
          </div>
         </div>
         <div id="completed-badge-lesson1" class="hidden completed-badge text-white px-4 py-2 rounded-full text-sm font-medium flex items-center space-x-1">
          <svg class="w-4 h-4" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
          </svg><span>Concluída</span>
         </div>
        </div><!-- Video -->
        <div class="video-container mb-6 rounded-xl overflow-hidden">
                <iframe
                    src="https://www.youtube-nocookie.com/embed/_T3lKKl-6bw?rel=0&modestbranding=1"
                    referrerpolicy="strict-origin-when-cross-origin"
                    frameborder="0"
                    allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
                    allowfullscreen>
                </iframe>
        </div><!-- Rating Section -->
        <div class="bg-gray-50 rounded-xl p-6 mb-6">
         <h4 class="font-semibold text-gray-900 mb-4">O que você achou desta aula?</h4>
         <div class="flex items-center space-x-4 mb-4">
          <div class="star-rating" id="rating-lesson1"><span class="star" data-rating="1">★</span> <span class="star" data-rating="2">★</span> <span class="star" data-rating="3">★</span> <span class="star" data-rating="4">★</span> <span class="star" data-rating="5">★</span>
          </div><span id="avg-rating-lesson1" class="text-sm text-gray-600">Média: 0.0 • 0 avaliações</span>
         </div><textarea id="comment-lesson1" placeholder="Deixe um comentário (opcional)" class="w-full px-4 py-3 border border-gray-200 rounded-lg resize-none focus:ring-2 focus:ring-blue-500 focus:border-transparent" rows="3"></textarea> <button onclick="submitRating('lesson1')" class="mt-3 px-6 py-2 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 transition-colors"> Enviar Avaliação </button>
         <div id="loading-lesson1" class="hidden mt-3 flex items-center space-x-2 text-gray-600">
          <div class="loading-spinner"></div><span>Salvando...</span>
         </div>
        </div><!-- Downloads -->
        <div class="bg-gradient-to-r from-gray-50 to-gray-100 rounded-xl p-6 mb-6">
         <h4 class="font-semibold text-gray-900 mb-4 flex items-center space-x-2">
          <svg class="w-5 h-5" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path>
          </svg><span>Materiais da Aula</span></h4>
         <div class="grid sm:grid-cols-2 gap-3">
          <a href="materiais/Introducao.pdf" download
           class="flex items-center justify-center space-x-2 px-4 py-3 bg-white border border-gray-200 rounded-lg hover:border-blue-500 hover:bg-blue-50 transition-colors">
           <svg class="w-5 h-5 text-gray-600" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 20l-5.447-2.724A1 1 0 013 16.382V5.618a1 1 0 011.447-.894L9 7m0 13l6-3m-6 3V7m6 10l4.553 2.276A1 1 0 0021 18.382V7.618a1 1 0 00-.553-.894L15 4m0 13V4m0 0L9 7"></path></svg>
           <span class="font-medium text-gray-700">Mapa Mental</span>
           </a>
          <a href="materiais/Introducao_notas-aula.pdf" download
           class="flex items-center justify-center space-x-2 px-4 py-3 bg-white border border-gray-200 rounded-lg hover:border-blue-500 hover:bg-blue-50 transition-colors">
           <svg class="w-5 h-5 text-gray-600" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path></svg>
           <span class="font-medium text-gray-700">Notas de Aula</span>
           </a>
         </div>
        </div><!-- Complete Lesson -->
        <div class="flex items-center space-x-3"><input type="checkbox" id="complete-lesson1" onchange="toggleComplete('lesson1')" class="w-5 h-5 text-blue-600 border-gray-300 rounded focus:ring-blue-500"> <label for="complete-lesson1" class="text-gray-700 font-medium cursor-pointer">Marcar como concluída</label>
        </div>
       </article><!-- Lesson 2 -->
       <article class="lesson-card bg-white rounded-2xl p-8 mb-6 shadow-sm border border-gray-100">
        <div class="flex items-start justify-between mb-6">
         <div>
          <h3 class="text-2xl font-bold text-gray-900 mb-2">Aula 2 – Orçamento Público: leis que o constituem</h3>
          <p class="text-gray-600 mb-3">Conheça as principais leis que fundamentam o orçamento público brasileiro.</p>
          <div class="flex items-center space-x-4 text-sm text-gray-500">
           <div class="flex items-center space-x-1">
            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path>
            </svg><span>5 min</span>
           </div>
          </div>
         </div>
         <div id="completed-badge-lesson2" class="hidden completed-badge text-white px-4 py-2 rounded-full text-sm font-medium flex items-center space-x-1">
          <svg class="w-4 h-4" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
          </svg><span>Concluída</span>
         </div>
        </div>
        <div class="video-container mb-6 rounded-xl overflow-hidden">
             <iframe
                src="https://www.youtube-nocookie.com/embed/4fyWyGCejbo?rel=0&modestbranding=1"
                referrerpolicy="strict-origin-when-cross-origin"
                frameborder="0"
                allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
                allowfullscreen>
            </iframe>
        </div>
        <div class="bg-gray-50 rounded-xl p-6 mb-6">
         <h4 class="font-semibold text-gray-900 mb-4">O que você achou desta aula?</h4>
         <div class="flex items-center space-x-4 mb-4">
          <div class="star-rating" id="rating-lesson2"><span class="star" data-rating="1">★</span> <span class="star" data-rating="2">★</span> <span class="star" data-rating="3">★</span> <span class="star" data-rating="4">★</span> <span class="star" data-rating="5">★</span>
          </div><span id="avg-rating-lesson2" class="text-sm text-gray-600">Média: 0.0 • 0 avaliações</span>
         </div><textarea id="comment-lesson2" placeholder="Deixe um comentário (opcional)" class="w-full px-4 py-3 border border-gray-200 rounded-lg resize-none focus:ring-2 focus:ring-blue-500 focus:border-transparent" rows="3"></textarea> <button onclick="submitRating('lesson2')" class="mt-3 px-6 py-2 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 transition-colors"> Enviar Avaliação </button>
         <div id="loading-lesson2" class="hidden mt-3 flex items-center space-x-2 text-gray-600">
          <div class="loading-spinner"></div><span>Salvando...</span>
         </div>
        </div>
        <div class="bg-gradient-to-r from-gray-50 to-gray-100 rounded-xl p-6 mb-6">
         <h4 class="font-semibold text-gray-900 mb-4 flex items-center space-x-2">
          <svg class="w-5 h-5" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path>
          </svg><span>Materiais da Aula</span></h4>
         <div class="grid sm:grid-cols-2 gap-3">
          <a href="materiais/Video_1.pdf" download
           class="flex items-center justify-center space-x-2 px-4 py-3 bg-white border border-gray-200 rounded-lg hover:border-blue-500 hover:bg-blue-50 transition-colors">
           <svg class="w-5 h-5 text-gray-600" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 20l-5.447-2.724A1 1 0 013 16.382V5.618a1 1 0 011.447-.894L9 7m0 13l6-3m-6 3V7m6 10l4.553 2.276A1 1 0 0021 18.382V7.618a1 1 0 00-.553-.894L15 4m0 13V4m0 0L9 7"></path></svg>
           <span class="font-medium text-gray-700">Mapa Mental</span>
           </a>
          <a href="materiais/Video_1_notas-aula.pdf" download
           class="flex items-center justify-center space-x-2 px-4 py-3 bg-white border border-gray-200 rounded-lg hover:border-blue-500 hover:bg-blue-50 transition-colors">
           <svg class="w-5 h-5 text-gray-600" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path></svg>
           <span class="font-medium text-gray-700">Notas de Aula</span>
           </a>
         </div>
        </div>
        <div class="flex items-center space-x-3"><input type="checkbox" id="complete-lesson2" onchange="toggleComplete('lesson2')" class="w-5 h-5 text-blue-600 border-gray-300 rounded focus:ring-blue-500"> <label for="complete-lesson2" class="text-gray-700 font-medium cursor-pointer">Marcar como concluída</label>
        </div>
       </article><!-- Lesson 3 -->
       <article class="lesson-card bg-white rounded-2xl p-8 shadow-sm border border-gray-100">
        <div class="flex items-start justify-between mb-6">
         <div>
          <h3 class="text-2xl font-bold text-gray-900 mb-2">Aula 3 – Como o governo arrecada e gasta?</h3>
          <p class="text-gray-600 mb-3">Entenda o processo de arrecadação e distribuição dos recursos públicos.</p>
          <div class="flex items-center space-x-4 text-sm text-gray-500">
           <div class="flex items-center space-x-1">
            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path>
            </svg><span>4 min</span>
           </div>
          </div>
         </div>
         <div id="completed-badge-lesson3" class="hidden completed-badge text-white px-4 py-2 rounded-full text-sm font-medium flex items-center space-x-1">
          <svg class="w-4 h-4" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
          </svg><span>Concluída</span>
         </div>
        </div>
        <div class="video-container mb-6 rounded-xl overflow-hidden">
            <iframe
                src="https://www.youtube-nocookie.com/embed/XDHh5dPjzXA?rel=0&modestbranding=1"
                referrerpolicy="strict-origin-when-cross-origin"
                frameborder="0"
                allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
                allowfullscreen>
            </iframe>
        </div>
        <div class="bg-gray-50 rounded-xl p-6 mb-6">
         <h4 class="font-semibold text-gray-900 mb-4">O que você achou desta aula?</h4>
         <div class="flex items-center space-x-4 mb-4">
          <div class="star-rating" id="rating-lesson3"><span class="star" data-rating="1">★</span> <span class="star" data-rating="2">★</span> <span class="star" data-rating="3">★</span> <span class="star" data-rating="4">★</span> <span class="star" data-rating="5">★</span>
          </div><span id="avg-rating-lesson3" class="text-sm text-gray-600">Média: 0.0 • 0 avaliações</span>
         </div><textarea id="comment-lesson3" placeholder="Deixe um comentário (opcional)" class="w-full px-4 py-3 border border-gray-200 rounded-lg resize-none focus:ring-2 focus:ring-blue-500 focus:border-transparent" rows="3"></textarea> <button onclick="submitRating('lesson3')" class="mt-3 px-6 py-2 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 transition-colors"> Enviar Avaliação </button>
         <div id="loading-lesson3" class="hidden mt-3 flex items-center space-x-2 text-gray-600">
          <div class="loading-spinner"></div><span>Salvando...</span>
         </div>
        </div>
        <div class="bg-gradient-to-r from-gray-50 to-gray-100 rounded-xl p-6 mb-6">
         <h4 class="font-semibold text-gray-900 mb-4 flex items-center space-x-2">
          <svg class="w-5 h-5" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path>
          </svg><span>Materiais da Aula</span></h4>
         <div class="grid sm:grid-cols-2 gap-3">
          <a href="materiais/Video_2.pdf" download
           class="flex items-center justify-center space-x-2 px-4 py-3 bg-white border border-gray-200 rounded-lg hover:border-blue-500 hover:bg-blue-50 transition-colors">
           <svg class="w-5 h-5 text-gray-600" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 20l-5.447-2.724A1 1 0 013 16.382V5.618a1 1 0 011.447-.894L9 7m0 13l6-3m-6 3V7m6 10l4.553 2.276A1 1 0 0021 18.382V7.618a1 1 0 00-.553-.894L15 4m0 13V4m0 0L9 7"></path></svg>
           <span class="font-medium text-gray-700">Mapa Mental</span>
           </a>
          <a href="materiais/Video_2_notas-aula.pdf" download
           class="flex items-center justify-center space-x-2 px-4 py-3 bg-white border border-gray-200 rounded-lg hover:border-blue-500 hover:bg-blue-50 transition-colors">
           <svg class="w-5 h-5 text-gray-600" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path></svg>
           <span class="font-medium text-gray-700">Notas de Aula</span>
           </a>
         </div>
        </div>
        <div class="flex items-center space-x-3"><input type="checkbox" id="complete-lesson3" onchange="toggleComplete('lesson3')" class="w-5 h-5 text-blue-600 border-gray-300 rounded focus:ring-blue-500"> <label for="complete-lesson3" class="text-gray-700 font-medium cursor-pointer">Marcar como concluída</label>
        </div>
       </article>
      </section><!-- Lesson 4 -->
      <article class="lesson-card bg-white rounded-2xl p-8 mb-6 shadow-sm border border-gray-100">
       <div class="flex items-start justify-between mb-6">
        <div>
         <h3 class="text-2xl font-bold text-gray-900 mb-2">Aula 4 – Dívida Pública e LRF: regras de controle</h3>
         <p class="text-gray-600 mb-3">Compreenda as regras da Lei de Responsabilidade Fiscal e o controle da dívida pública.</p>
         <div class="flex items-center space-x-4 text-sm text-gray-500">
          <div class="flex items-center space-x-1">
           <svg class="w-4 h-4" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path>
           </svg><span>5 min</span>
          </div>
         </div>
        </div>
        <div id="completed-badge-lesson4" class="hidden completed-badge text-white px-4 py-2 rounded-full text-sm font-medium flex items-center space-x-1">
         <svg class="w-4 h-4" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
         </svg><span>Concluída</span>
        </div>
       </div>
       <div class="video-container mb-6 rounded-xl overflow-hidden">
            <iframe
                src="https://www.youtube-nocookie.com/embed/F3T-_ovNijI?rel=0&modestbranding=1"
                referrerpolicy="strict-origin-when-cross-origin"
                frameborder="0"
                allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
                allowfullscreen>
            </iframe>
       </div>
       <div class="bg-gray-50 rounded-xl p-6 mb-6">
        <h4 class="font-semibold text-gray-900 mb-4">O que você achou desta aula?</h4>
        <div class="flex items-center space-x-4 mb-4">
         <div class="star-rating" id="rating-lesson4"><span class="star" data-rating="1">★</span> <span class="star" data-rating="2">★</span> <span class="star" data-rating="3">★</span> <span class="star" data-rating="4">★</span> <span class="star" data-rating="5">★</span>
         </div><span id="avg-rating-lesson4" class="text-sm text-gray-600">Média: 0.0 • 0 avaliações</span>
        </div><textarea id="comment-lesson4" placeholder="Deixe um comentário (opcional)" class="w-full px-4 py-3 border border-gray-200 rounded-lg resize-none focus:ring-2 focus:ring-blue-500 focus:border-transparent" rows="3"></textarea> <button onclick="submitRating('lesson4')" class="mt-3 px-6 py-2 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 transition-colors"> Enviar Avaliação </button>
        <div id="loading-lesson4" class="hidden mt-3 flex items-center space-x-2 text-gray-600">
         <div class="loading-spinner"></div><span>Salvando...</span>
        </div>
       </div>
       <div class="bg-gradient-to-r from-gray-50 to-gray-100 rounded-xl p-6 mb-6">
        <h4 class="font-semibold text-gray-900 mb-4 flex items-center space-x-2">
         <svg class="w-5 h-5" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path>
         </svg><span>Materiais da Aula</span></h4>
        <div class="grid sm:grid-cols-2 gap-3">
          <a href="materiais/Video_3.pdf" download
           class="flex items-center justify-center space-x-2 px-4 py-3 bg-white border border-gray-200 rounded-lg hover:border-blue-500 hover:bg-blue-50 transition-colors">
           <svg class="w-5 h-5 text-gray-600" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 20l-5.447-2.724A1 1 0 013 16.382V5.618a1 1 0 011.447-.894L9 7m0 13l6-3m-6 3V7m6 10l4.553 2.276A1 1 0 0021 18.382V7.618a1 1 0 00-.553-.894L15 4m0 13V4m0 0L9 7"></path></svg>
           <span class="font-medium text-gray-700">Mapa Mental</span>
           </a>
          <a href="materiais/Video_3_notas-aula.pdf" download
           class="flex items-center justify-center space-x-2 px-4 py-3 bg-white border border-gray-200 rounded-lg hover:border-blue-500 hover:bg-blue-50 transition-colors">
           <svg class="w-5 h-5 text-gray-600" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path></svg>
           <span class="font-medium text-gray-700">Notas de Aula</span>
           </a>
        </div>
       </div>
       <div class="flex items-center space-x-3"><input type="checkbox" id="complete-lesson4" onchange="toggleComplete('lesson4')" class="w-5 h-5 text-blue-600 border-gray-300 rounded focus:ring-blue-500"> <label for="complete-lesson4" class="text-gray-700 font-medium cursor-pointer">Marcar como concluída</label>
       </div>
      </article><!-- Lesson 5 -->
      <article class="lesson-card bg-white rounded-2xl p-8 mb-6 shadow-sm border border-gray-100">
       <div class="flex items-start justify-between mb-6">
        <div>
         <h3 class="text-2xl font-bold text-gray-900 mb-2">Aula 5 – Emendas Parlamentares, Impostos e Orçamento Secreto</h3>
         <p class="text-gray-600 mb-3">Entenda o papel das emendas parlamentares e as polêmicas sobre transparência orçamentária.</p>
         <div class="flex items-center space-x-4 text-sm text-gray-500">
          <div class="flex items-center space-x-1">
           <svg class="w-4 h-4" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path>
           </svg><span>5 min</span>
          </div>
         </div>
        </div>
        <div id="completed-badge-lesson5" class="hidden completed-badge text-white px-4 py-2 rounded-full text-sm font-medium flex items-center space-x-1">
         <svg class="w-4 h-4" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
         </svg><span>Concluída</span>
        </div>
       </div>
       <div class="video-container mb-6 rounded-xl overflow-hidden">
            <iframe
                src="https://www.youtube-nocookie.com/embed/sMpp77AmwF4?rel=0&modestbranding=1"
                referrerpolicy="strict-origin-when-cross-origin"
                frameborder="0"
                allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
                allowfullscreen>
            </iframe>
       </div>
       <div class="bg-gray-50 rounded-xl p-6 mb-6">
        <h4 class="font-semibold text-gray-900 mb-4">O que você achou desta aula?</h4>
        <div class="flex items-center space-x-4 mb-4">
         <div class="star-rating" id="rating-lesson5"><span class="star" data-rating="1">★</span> <span class="star" data-rating="2">★</span> <span class="star" data-rating="3">★</span> <span class="star" data-rating="4">★</span> <span class="star" data-rating="5">★</span>
         </div><span id="avg-rating-lesson5" class="text-sm text-gray-600">Média: 0.0 • 0 avaliações</span>
        </div><textarea id="comment-lesson5" placeholder="Deixe um comentário (opcional)" class="w-full px-4 py-3 border border-gray-200 rounded-lg resize-none focus:ring-2 focus:ring-blue-500 focus:border-transparent" rows="3"></textarea> <button onclick="submitRating('lesson5')" class="mt-3 px-6 py-2 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 transition-colors"> Enviar Avaliação </button>
        <div id="loading-lesson5" class="hidden mt-3 flex items-center space-x-2 text-gray-600">
         <div class="loading-spinner"></div><span>Salvando...</span>
        </div>
       </div>
       <div class="bg-gradient-to-r from-gray-50 to-gray-100 rounded-xl p-6 mb-6">
        <h4 class="font-semibold text-gray-900 mb-4 flex items-center space-x-2">
         <svg class="w-5 h-5" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path>
         </svg><span>Materiais da Aula</span></h4>
        <div class="grid sm:grid-cols-2 gap-3">
          <a href="materiais/Video_4.pdf" download
           class="flex items-center justify-center space-x-2 px-4 py-3 bg-white border border-gray-200 rounded-lg hover:border-blue-500 hover:bg-blue-50 transition-colors">
           <svg class="w-5 h-5 text-gray-600" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 20l-5.447-2.724A1 1 0 013 16.382V5.618a1 1 0 011.447-.894L9 7m0 13l6-3m-6 3V7m6 10l4.553 2.276A1 1 0 0021 18.382V7.618a1 1 0 00-.553-.894L15 4m0 13V4m0 0L9 7"></path></svg>
           <span class="font-medium text-gray-700">Mapa Mental</span>
           </a>
          <a href="materiais/Video_4_notas-aula.pdf" download
           class="flex items-center justify-center space-x-2 px-4 py-3 bg-white border border-gray-200 rounded-lg hover:border-blue-500 hover:bg-blue-50 transition-colors">
           <svg class="w-5 h-5 text-gray-600" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path></svg>
           <span class="font-medium text-gray-700">Notas de Aula</span>
           </a>
        </div>
       </div>
       <div class="flex items-center space-x-3"><input type="checkbox" id="complete-lesson5" onchange="toggleComplete('lesson5')" class="w-5 h-5 text-blue-600 border-gray-300 rounded focus:ring-blue-500"> <label for="complete-lesson5" class="text-gray-700 font-medium cursor-pointer">Marcar como concluída</label>
       </div>
      </article>
      <article class="lesson-card bg-white rounded-2xl p-8 shadow-sm border border-gray-100">
       <div class="flex items-start justify-between mb-6">
        <div>
         <h3 class="text-2xl font-bold text-gray-900 mb-2">Aula 6 – Controle e Transparência</h3>
         <p class="text-gray-600 mb-3">Mecanismos de controle e fiscalização do orçamento público.</p>
         <div class="flex items-center space-x-4 text-sm text-gray-500">
          <div class="flex items-center space-x-1">
           <svg class="w-4 h-4" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path>
           </svg><span>8 min</span>
          </div>
         </div>
        </div>
        <div id="completed-badge-lesson6" class="hidden completed-badge text-white px-4 py-2 rounded-full text-sm font-medium flex items-center space-x-1">
         <svg class="w-4 h-4" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
         </svg><span>Concluída</span>
        </div>
       </div>
       <div class="video-container mb-6 rounded-xl overflow-hidden">
            <iframe
                src="https://www.youtube-nocookie.com/embed/LxCEUeUaZG8?rel=0&modestbranding=1"
                referrerpolicy="strict-origin-when-cross-origin"
                frameborder="0"
                allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
                allowfullscreen>
            </iframe>
       </div>
       <div class="bg-gray-50 rounded-xl p-6 mb-6">
        <h4 class="font-semibold text-gray-900 mb-4">O que você achou desta aula?</h4>
        <div class="flex items-center space-x-4 mb-4">
         <div class="star-rating" id="rating-lesson6"><span class="star" data-rating="1">★</span> <span class="star" data-rating="2">★</span> <span class="star" data-rating="3">★</span> <span class="star" data-rating="4">★</span> <span class="star" data-rating="5">★</span>
         </div><span id="avg-rating-lesson6" class="text-sm text-gray-600">Média: 0.0 • 0 avaliações</span>
        </div><textarea id="comment-lesson6" placeholder="Deixe um comentário (opcional)" class="w-full px-4 py-3 border border-gray-200 rounded-lg resize-none focus:ring-2 focus:ring-blue-500 focus:border-transparent" rows="3"></textarea> <button onclick="submitRating('lesson6')" class="mt-3 px-6 py-2 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 transition-colors"> Enviar Avaliação </button>
        <div id="loading-lesson6" class="hidden mt-3 flex items-center space-x-2 text-gray-600">
         <div class="loading-spinner"></div><span>Salvando...</span>
        </div>
       </div>
       <div class="bg-gradient-to-r from-gray-50 to-gray-100 rounded-xl p-6 mb-6">
        <h4 class="font-semibold text-gray-900 mb-4 flex items-center space-x-2">
         <svg class="w-5 h-5" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path>
         </svg><span>Materiais da Aula</span></h4>
        <div class="grid sm:grid-cols-2 gap-3">
          <a href="materiais/Video_5.pdf" download
           class="flex items-center justify-center space-x-2 px-4 py-3 bg-white border border-gray-200 rounded-lg hover:border-blue-500 hover:bg-blue-50 transition-colors">
           <svg class="w-5 h-5 text-gray-600" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 20l-5.447-2.724A1 1 0 013 16.382V5.618a1 1 0 011.447-.894L9 7m0 13l6-3m-6 3V7m6 10l4.553 2.276A1 1 0 0021 18.382V7.618a1 1 0 00-.553-.894L15 4m0 13V4m0 0L9 7"></path></svg>
           <span class="font-medium text-gray-700">Mapa Mental</span>
           </a>
          <a href="materiais/Video_5_notas-aula.pdf" download
           class="flex items-center justify-center space-x-2 px-4 py-3 bg-white border border-gray-200 rounded-lg hover:border-blue-500 hover:bg-blue-50 transition-colors">
           <svg class="w-5 h-5 text-gray-600" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path></svg>
           <span class="font-medium text-gray-700">Notas de Aula</span>
           </a>
        </div>
       </div>
       <div class="flex items-center space-x-3"><input type="checkbox" id="complete-lesson6" onchange="toggleComplete('lesson6')" class="w-5 h-5 text-blue-600 border-gray-300 rounded focus:ring-blue-500"> <label for="complete-lesson6" class="text-gray-700 font-medium cursor-pointer">Marcar como concluída</label>
       </div>
      </article> <!-- Course Evaluation -->
      <section class="bg-gradient-to-r from-blue-600 to-purple-600 rounded-2xl p-8 text-white">
       <h2 class="text-2xl font-bold mb-4">Avalie o Curso Completo</h2>
       <p id="footer-message" class="text-blue-100 mb-6">Parabéns por concluir o curso! Sua opinião é muito importante para melhorarmos continuamente. Deixe sua avaliação geral do curso.</p>
       <div class="bg-white/10 backdrop-blur-sm rounded-xl p-6">
        <div class="mb-4"><label class="block text-sm font-medium mb-2">Nota Geral (1-5 estrelas)</label>
         <div class="star-rating" id="rating-course"><span class="star" data-rating="1">★</span> <span class="star" data-rating="2">★</span> <span class="star" data-rating="3">★</span> <span class="star" data-rating="4">★</span> <span class="star" data-rating="5">★</span>
         </div>
        </div>
        <div class="mb-4"><label class="block text-sm font-medium mb-2">Seu Feedback</label> <textarea id="course-feedback" placeholder="Conte-nos sobre sua experiência com o curso..." class="w-full px-4 py-3 bg-white text-gray-900 border border-gray-200 rounded-lg resize-none focus:ring-2 focus:ring-blue-500 focus:border-transparent" rows="4"></textarea>
        </div><button onclick="submitCourseFeedback()" class="w-full px-6 py-3 bg-white text-blue-600 rounded-lg font-semibold hover:bg-blue-50 transition-colors"> Enviar Avaliação do Curso </button>
        <div id="loading-course" class="hidden mt-3 flex items-center justify-center space-x-2 text-white">
         <div class="loading-spinner"></div><span>Salvando...</span>
        </div>
       </div>
      </section>
     </div><!-- Sidebar -->
     <aside class="lg:col-span-1">
      <div class="sidebar-fixed space-y-6"><!-- Progress Card -->
       <div class="bg-white rounded-2xl p-6 shadow-sm border border-gray-100">
        <h3 class="font-semibold text-gray-900 mb-4">Seu Progresso</h3>
        <div class="flex items-center justify-center mb-4">
         <div class="relative w-24 h-24">
          <svg class="transform -rotate-90 w-24 h-24"><circle cx="48" cy="48" r="40" stroke="#e5e7eb" stroke-width="8" fill="none" /> <circle id="progress-circle" cx="48" cy="48" r="40" stroke="#3b82f6" stroke-width="8" fill="none" stroke-dasharray="251.2" stroke-dashoffset="251.2" class="progress-ring" />
          </svg>
          <div class="absolute inset-0 flex items-center justify-center"><span id="progress-percent" class="text-2xl font-bold text-gray-900">0%</span>
          </div>
         </div>
        </div>
        <p id="progress-lessons" class="text-center text-sm text-gray-600 mb-4">0 de 6 aulas concluídas</p>
       </div><!-- Lesson List -->
       <div class="bg-white rounded-2xl p-6 shadow-sm border border-gray-100">
        <h3 class="font-semibold text-gray-900 mb-4">Lista de Aulas</h3>
        <nav class="space-y-2"><button onclick="scrollToLesson('lesson1')" class="w-full text-left px-3 py-2 rounded-lg hover:bg-gray-50 transition-colors text-sm text-gray-700">
          <div class="flex items-center justify-between"><span>1. Introdução</span> <span id="check-lesson1" class="hidden text-green-600">✓</span>
          </div></button> <button onclick="scrollToLesson('lesson2')" class="w-full text-left px-3 py-2 rounded-lg hover:bg-gray-50 transition-colors text-sm text-gray-700">
          <div class="flex items-center justify-between"><span>2. Leis que o constituem</span> <span id="check-lesson2" class="hidden text-green-600">✓</span>
          </div></button> <button onclick="scrollToLesson('lesson3')" class="w-full text-left px-3 py-2 rounded-lg hover:bg-gray-50 transition-colors text-sm text-gray-700">
          <div class="flex items-center justify-between"><span>3. Arrecadação e gastos</span> <span id="check-lesson3" class="hidden text-green-600">✓</span>
          </div></button> <button onclick="scrollToLesson('lesson4')" class="w-full text-left px-3 py-2 rounded-lg hover:bg-gray-50 transition-colors text-sm text-gray-700">
          <div class="flex items-center justify-between"><span>4. Dívida Pública e LRF</span> <span id="check-lesson4" class="hidden text-green-600">✓</span>
          </div></button> <button onclick="scrollToLesson('lesson5')" class="w-full text-left px-3 py-2 rounded-lg hover:bg-gray-50 transition-colors text-sm text-gray-700">
          <div class="flex items-center justify-between"><span>5. Emendas e Orçamento Secreto</span> <span id="check-lesson5" class="hidden text-green-600">✓</span>
          </div></button> <button onclick="scrollToLesson('lesson6')" class="w-full text-left px-3 py-2 rounded-lg hover:bg-gray-50 transition-colors text-sm text-gray-700">
          <div class="flex items-center justify-between"><span>6. Curiosidades</span> <span id="check-lesson6" class="hidden text-green-600">✓</span>
          </div></button>
        </nav>
       </div><!-- Support -->
       <div class="bg-gradient-to-br from-blue-50 to-purple-50 rounded-2xl p-6 border border-blue-100">
        <h3 class="font-semibold text-gray-900 mb-3">Precisa de Ajuda?</h3>
        <p class="text-sm text-gray-600 mb-4">Entre em contato conosco para suporte ou dúvidas sobre o curso.</p><button onclick="openSupport()" class="w-full px-4 py-2 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 transition-colors text-sm"> Falar com Suporte </button>
       </div>
      </div>
     </aside>
    </div>
   </div>
  </main>
  <script>
        // Default config for editable features
        const defaultConfig = {
            course_title: "Curso de Orçamento Público",
            welcome_title: "Bem-vindo à Área do Curso",
            welcome_text: "Aqui você encontra todas as aulas do curso organizadas por módulos. Assista aos vídeos, avalie o conteúdo e baixe os materiais complementares. Marque as aulas como concluídas para acompanhar seu progresso!",
            footer_message: "Parabéns por concluir o curso! Sua opinião é muito importante para melhorarmos continuamente. Deixe sua avaliação geral do curso."
        }
        // === CONFIG GOOGLE SHEETS (preencha com a URL do Apps Script) ===
        const SHEETS_ENDPOINT = 'https://script.google.com/macros/s/AKfycbxAVAwsvyKUAvyuC9_5SYPKOJcKuNGwnU9Vw3XtSo4r8za21OBiJATtAWi-ZJWpd9rO9Q/exec';

       // Helper genérico que envia os dados para o Google Sheets
        async function sendToSheets(payload) {
            if (!SHEETS_ENDPOINT) {
                console.warn('SHEETS_ENDPOINT não configurado');
                return;
            }

            // Inclui algumas infos extras automaticamente
            const finalPayload = {
                ...payload,
                userAgent: navigator.userAgent,
                page: window.location.href
            };

            try {
                await fetch(SHEETS_ENDPOINT, {
                    method: 'POST',
                    headers: {
                        // text/plain evita problemas de CORS (é um "simple request")
                        'Content-Type': 'text/plain;charset=utf-8'
                    },
                    body: JSON.stringify(finalPayload)
                });
            } catch (err) {
                console.error('Erro ao enviar para Sheets:', err);
            }
        };

        // State management
        let lessonData = [];
        const totalLessons = 6;
        let selectedRatings = {};
        let courseFeedbackRating = 0;

        // Data SDK handler
        const dataHandler = {
            onDataChanged(data) {
                lessonData = data;
                updateProgressUI();
                updateLessonCompletionUI();
                updateRatingsUI();
            }
        };

        // Initialize Data SDK
        async function initDataSDK() {
            if (window.dataSdk) {
                const initResult = await window.dataSdk.init(dataHandler);
                if (!initResult.isOk) {
                    console.error("Failed to initialize Data SDK");
                }
            }
        }

        // Initialize Element SDK
        async function initElementSDK() {
            if (window.elementSdk) {
                await window.elementSdk.init({
                    defaultConfig,
                    onConfigChange: async (config) => {
                        document.getElementById('course-title').textContent = config.course_title || defaultConfig.course_title;
                        document.getElementById('welcome-title').textContent = config.welcome_title || defaultConfig.welcome_title;
                        document.getElementById('welcome-text').textContent = config.welcome_text || defaultConfig.welcome_text;
                        document.getElementById('footer-message').textContent = config.footer_message || defaultConfig.footer_message;
                    },
                    mapToCapabilities: () => ({
                        recolorables: [],
                        borderables: [],
                        fontEditable: undefined,
                        fontSizeable: undefined
                    }),
                    mapToEditPanelValues: (config) => new Map([
                        ["course_title", config.course_title || defaultConfig.course_title],
                        ["welcome_title", config.welcome_title || defaultConfig.welcome_title],
                        ["welcome_text", config.welcome_text || defaultConfig.welcome_text],
                        ["footer_message", config.footer_message || defaultConfig.footer_message]
                    ])
                });
            }
        }

        // Initialize on page load
        document.addEventListener('DOMContentLoaded', async () => {
            await initDataSDK();
            await initElementSDK();
            setupStarRatings();
        });

        // Star rating setup
        function setupStarRatings() {
            const ratingContainers = document.querySelectorAll('.star-rating');
            ratingContainers.forEach(container => {
                const stars = container.querySelectorAll('.star');
                const lessonId = container.id.replace('rating-', '');
                
                stars.forEach(star => {
                    star.addEventListener('click', () => {
                        const rating = parseInt(star.dataset.rating);
                        selectedRatings[lessonId] = rating;
                        updateStarDisplay(container, rating);
                        
                        if (lessonId === 'course') {
                            courseFeedbackRating = rating;
                        }
                    });
                    
                    star.addEventListener('mouseenter', () => {
                        const rating = parseInt(star.dataset.rating);
                        updateStarDisplay(container, rating);
                    });
                });
                
                container.addEventListener('mouseleave', () => {
                    const currentRating = selectedRatings[lessonId] || 0;
                    updateStarDisplay(container, currentRating);
                });
            });
        }

        function updateStarDisplay(container, rating) {
            const stars = container.querySelectorAll('.star');
            stars.forEach((star, index) => {
                if (index < rating) {
                    star.classList.add('active');
                } else {
                    star.classList.remove('active');
                }
            });
        }

        // Submit rating
        async function submitRating(lessonId) {
            const rating = selectedRatings[lessonId];
            if (!rating) {
                showToast('Por favor, selecione uma nota antes de enviar.');
                return;
            }

            const commentEl = document.getElementById(`comment-${lessonId}`);
            const comment = commentEl ? commentEl.value : '';
            const loadingEl = document.getElementById(`loading-${lessonId}`);
            
            if (loadingEl) {
                loadingEl.classList.remove('hidden');
            }

            const record = {
                lesson_id: lessonId,
                rating: rating,
                comment: comment,
                completed: false,
                timestamp: new Date().toISOString()
            };

            // 1) Envia para o Google Sheets
            await sendToSheets({
                type: 'lesson',
                lessonId: lessonId,
                rating: rating,
                comment: comment,
                completed: false
            });

            // 2) Se o dataSdk existir (ex: se você usar em outra plataforma),
            //    continua usando normalmente
            if (window.dataSdk) {
                const result = await window.dataSdk.create(record);
                if (loadingEl) loadingEl.classList.add('hidden');
                
                if (result.isOk) {
                    showToast('Avaliação enviada com sucesso!');
                    if (commentEl) commentEl.value = '';
                } else {
                    showToast('Erro ao enviar avaliação. Tente novamente.');
                }
            } else {
                // Caso esteja só no GitHub Pages, considera sucesso após enviar pro Sheets
                if (loadingEl) loadingEl.classList.add('hidden');
                showToast('Avaliação enviada com sucesso!');
                if (commentEl) commentEl.value = '';
            }
        };

        // Toggle lesson completion
        async function toggleComplete(lessonId) {
            const checkbox = document.getElementById(`complete-${lessonId}`);
            const completed = checkbox.checked;

            // Se estiver rodando dentro da plataforma original (com dataSdk), mantém o comportamento antigo
            if (window.dataSdk) {
                const existingRecord = lessonData.find(
                    item => item.lesson_id === lessonId && item.completed !== undefined
                );

                if (existingRecord) {
                    const updatedRecord = { ...existingRecord, completed: completed };
                    if (window.dataSdk) {
                        const result = await window.dataSdk.update(updatedRecord);
                        if (result.isOk) {
                            showToast(completed ? 'Aula marcada como concluída!' : 'Marcação removida.');
                        }
                    }
                }

                // O SDK deve chamar onDataChanged depois e atualizar o progresso
            } else {
                // GitHub Pages / modo estático: controla tudo localmente no lessonData
                let localRecord = lessonData.find(
                    item => item.lesson_id === lessonId && item.completed !== undefined
                );

                if (localRecord) {
                    localRecord.completed = completed;
                } else {
                    localRecord = {
                        lesson_id: lessonId,
                        rating: 0,
                        comment: '',
                        completed: completed,
                        timestamp: new Date().toISOString()
                    };
                    lessonData.push(localRecord);
                }

                // Atualiza barras, badges e lista lateral
                updateProgressUI();
                updateLessonCompletionUI();

                showToast(completed ? 'Aula marcada como concluída!' : 'Marcação removida.');
            }
        }


        // Update progress UI
        function updateProgressUI() {
            const completedLessons = lessonData.filter(item => item.completed === true).length;
            const percentage = Math.round((completedLessons / totalLessons) * 100);

            // Update progress bar
            document.getElementById('progress-bar').style.width = `${percentage}%`;
            document.getElementById('progress-text').textContent = `${completedLessons} de ${totalLessons} aulas concluídas`;
            document.getElementById('progress-percentage').textContent = `${percentage}%`;

            // Update sidebar progress
            document.getElementById('progress-percent').textContent = `${percentage}%`;
            document.getElementById('progress-lessons').textContent = `${completedLessons} de ${totalLessons} aulas concluídas`;

            // Update circular progress
            const circle = document.getElementById('progress-circle');
            const circumference = 251.2;
            const offset = circumference - (percentage / 100) * circumference;
            circle.style.strokeDashoffset = offset;
        }

        // Update lesson completion UI
        function updateLessonCompletionUI() {
            for (let i = 1; i <= totalLessons; i++) {
                const lessonId = `lesson${i}`;
                const isCompleted = lessonData.some(item => item.lesson_id === lessonId && item.completed === true);
                
                // Update checkbox
                const checkbox = document.getElementById(`complete-${lessonId}`);
                if (checkbox) {
                    checkbox.checked = isCompleted;
                }
                
                // Update badge
                const badge = document.getElementById(`completed-badge-${lessonId}`);
                if (badge) {
                    if (isCompleted) {
                        badge.classList.remove('hidden');
                    } else {
                        badge.classList.add('hidden');
                    }
                }
                
                // Update sidebar check
                const check = document.getElementById(`check-${lessonId}`);
                if (check) {
                    if (isCompleted) {
                        check.classList.remove('hidden');
                    } else {
                        check.classList.add('hidden');
                    }
                }
            }
        }

        // Update ratings UI
        function updateRatingsUI() {
            for (let i = 1; i <= totalLessons; i++) {
                const lessonId = `lesson${i}`;
                const ratings = lessonData.filter(item => item.lesson_id === lessonId && item.rating > 0);
                
                if (ratings.length > 0) {
                    const avgRating = (ratings.reduce((sum, item) => sum + item.rating, 0) / ratings.length).toFixed(1);
                    const avgElement = document.getElementById(`avg-rating-${lessonId}`);
                    if (avgElement) {
                        avgElement.textContent = `Média: ${avgRating} • ${ratings.length} avaliações`;
                    }
                }
            }
        }

        // Submit course feedback
        async function submitCourseFeedback() {
            if (!courseFeedbackRating) {
                showToast('Por favor, selecione uma nota antes de enviar.');
                return;
            }

            const feedbackEl = document.getElementById('course-feedback');
            const feedback = feedbackEl ? feedbackEl.value : '';

            if (!feedback.trim()) {
                showToast('Por favor, escreva um feedback antes de enviar.');
                return;
            }

            const loadingEl = document.getElementById('loading-course');
            if (loadingEl) {
                loadingEl.classList.remove('hidden');
            }

            const record = {
                lesson_id: 'course-overall',
                rating: courseFeedbackRating,
                comment: feedback,
                completed: false,
                timestamp: new Date().toISOString()
            };

            // 1) Envia para o Google Sheets
            await sendToSheets({
                type: 'course',
                lessonId: 'course-overall',
                rating: courseFeedbackRating,
                comment: feedback,
                completed: false
            });

            // 2) Integração opcional com dataSdk, se existir
            if (window.dataSdk) {
                const result = await window.dataSdk.create(record);
                if (loadingEl) loadingEl.classList.add('hidden');
                
                if (result.isOk) {
                    showToast('Obrigado pelo seu feedback!');
                } else {
                    showToast('Erro ao enviar feedback. Tente novamente.');
                    return;
                }
            } else {
                // GitHub Pages puro: considera sucesso após enviar ao Sheets
                if (loadingEl) loadingEl.classList.add('hidden');
                showToast('Obrigado pelo seu feedback!');
            }

            // Limpa campos e estrelas
            if (feedbackEl) feedbackEl.value = '';
            courseFeedbackRating = 0;
            const courseRatingContainer = document.getElementById('rating-course');
            if (courseRatingContainer) {
                updateStarDisplay(courseRatingContainer, 0);
            }
            selectedRatings['course'] = 0;
        }

        // Navigation functions
        function scrollToModule(moduleId) {
            document.getElementById(moduleId).scrollIntoView({ behavior: 'smooth', block: 'start' });
        }

        function scrollToLesson(lessonId) {
            const lessonElement = document.querySelector(`#complete-${lessonId}`).closest('article');
            lessonElement.scrollIntoView({ behavior: 'smooth', block: 'start' });
        }

        function handleExit() {
            showToast('Redirecionando para a página inicial...');
            setTimeout(() => {
                window.location.href = '/';
            }, 1500);
        }

        function downloadMaterial(type) {
            showToast(`Download do material (${type}) iniciado!`);
        }

        function openSupport() {
            const subject = encodeURIComponent("Suporte - Curso de Orçamento Público");
            const body = encodeURIComponent(
                "Olá Bruno," +
                " estou fazendo o curso de Orçamento Público e preciso de ajuda com:" +
                " (descreva seu problema aqui)"
            );
            window.location.href = `mailto:bruno.carvalho.1413340@sga.pucminas.br?subject=${subject}&body=${body}`;
        }

        // Toast notification
        function showToast(message) {
            const existingToast = document.querySelector('.toast');
            if (existingToast) {
                existingToast.remove();
            }

            const toast = document.createElement('div');
            toast.className = 'toast';
            toast.textContent = message;
            document.body.appendChild(toast);

            setTimeout(() => {
                toast.remove();
            }, 3000);
        }
    </script>
 <script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'9a6f84005515e01c',t:'MTc2NDU1OTkyOC4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>

</html>






